<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Advanced Usage - Ember CP Validations</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/css/custom.css">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="../assets/css/theme.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700' rel='stylesheet' type='text/css'>
</head>
<body>
    <div class="row">
        <div class="sidebar-container">
            <div id="sidebar">
              <div class="header">
                <h1 class="brand" style="padding: 10px 16px 10px; height: 20px; line-height: 20px; margin-left: 0;">
                  <a href="../">Ember CP Validations</a>
                </h1>
                <form class="navbar-form">
                    <input type="search" class="search-query" placeholder="Search classes/modules...">
                </form>
              </div>
              <ul class="main-nav">
                <li class="section">Modules</li>
                   <li  >
                     <a href="../modules/Home.html">Home</a>
                        <li class="sub "><a href="../modules/Basic Usage.html">Basic Usage</a></li>
                        <li class="sub active"><a href="../modules/Advanced Usage.html">Advanced Usage</a></li>
                        <li class="sub "><a href="../modules/I18n Solutions.html">I18n Solutions</a></li>
                   </li>
                   <li  >
                     <a href="../modules/Templating.html">Templating</a>
                   </li>
                   <li  >
                     <a href="../modules/Validations.html">Validations</a>
                   </li>
                   <li  >
                     <a href="../modules/Validators.html">Validators</a>
                   </li>
            
                <li class="section">Classes</li>
                    <li ><a  href="../classes/Base.html">Base</a></li>
                    <li ><a  href="../classes/Belongs To.html">Belongs To</a></li>
                    <li ><a  href="../classes/Collection.html">Collection</a></li>
                    <li ><a  href="../classes/Confirmation.html">Confirmation</a></li>
                    <li ><a  href="../classes/Custom.html">Custom</a></li>
                    <li ><a  href="../classes/Date.html">Date</a></li>
                    <li ><a  href="../classes/Dependent.html">Dependent</a></li>
                    <li ><a  href="../classes/DS Error.html">DS Error</a></li>
                    <li ><a  href="../classes/Error.html">Error</a></li>
                    <li ><a  href="../classes/Exclusion.html">Exclusion</a></li>
                    <li ><a  href="../classes/Factory.html">Factory</a></li>
                    <li ><a  href="../classes/Format.html">Format</a></li>
                    <li ><a  href="../classes/Has Many.html">Has Many</a></li>
                    <li ><a  href="../classes/Inclusion.html">Inclusion</a></li>
                    <li ><a  href="../classes/Length.html">Length</a></li>
                    <li ><a  href="../classes/Messages.html">Messages</a></li>
                    <li ><a  href="../classes/Number.html">Number</a></li>
                    <li ><a  href="../classes/Presence.html">Presence</a></li>
                    <li ><a  href="../classes/Result.html">Result</a></li>
                    <li ><a  href="../classes/ResultCollection.html">ResultCollection</a></li>
              </ul>
            
              <div class="footer">
                <a href="https://github.com/offirgolan/ember-cp-validations" class="github">GitHub</a>
                <p class="version pull-right">v2.7.2</p>
              </div>
            </div>
        </div>
        <div class="content-container">
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <form id="options-form" class="form-inline pull-right">
                            Show:
                            <label for="api-show-inherited" class="checkbox">
                                <input type="checkbox" id="api-show-inherited" checked>
                                Inherited
                            </label>
                    
                            <label for="api-show-protected" class="checkbox">
                                <input type="checkbox" id="api-show-protected">
                                Protected
                            </label>
                    
                            <label for="api-show-private" class="checkbox">
                                <input type="checkbox" id="api-show-private">
                                Private
                            </label>
                            <label for="api-show-deprecated" class="checkbox">
                                <input type="checkbox" id="api-show-deprecated">
                                Deprecated
                            </label>
                    
                        </form>
                    
<div class="page-header">
    <h1>Advanced Usage</h1>
</div>

<div class="clearfix well well-small">


        <div class="foundat">
            Defined in: <a href="../files/addon_index.js.html#l141"><code>addon&#x2F;index.js:141</code></a>
        </div>

</div>


<div class="moduledesc page-section">
    <p><h3 id="defaultOptions">Default Options</h3></p>
<p>Default options can be specified over a set of validations for a given attribute. Local properties will always take precedence.</p>
<p>Instead of doing the following:</p>
<pre class="code prettyprint"><code class="language-javascript">const Validations = buildValidations({
  username: [
    validator('presence', {
      presence: true,
      description: 'Username'
    }),
    validator('length', {
      min: 1,
      description: 'Username'
    }),
    validator('no-whitespace-around', {
      description: 'A username'
    })
  ]
});
</code></pre>
<p>We can declare default options:</p>
<pre class="code prettyprint"><code class="language-javascript">const Validations = buildValidations({
  username: {
    description: 'Username'
    validators: [
      validator('presence', true),
      validator('length', {
        min: 1
      }),
      validator('no-whitespace-around', {
        description: 'A username'
      })
    ]
  },
});
</code></pre>
<p>In the above example, all the validators for username will have a description of <code>Username</code> except that of the <code>no-whitespace-around</code> validator which will be <code>A username</code>.</p>
<p><h3 id="globalOptions">Global Options</h3></p>
<p>If you have  specific options you want to propagate throught all your validation rules, you can do so by passing in a global options object.
This is ideal for when you have a dependent key that each validator requires such as the current locale from your i18n implementation, or
you want easily toggle your validations on/off.</p>
<pre class="code prettyprint"><code class="language-javascript">const Validations = buildValidations(validationRules, globalOptions);
</code></pre>
<pre class="code prettyprint"><code class="language-javascript">import Ember from 'ember';
import { validator, buildValidations } from 'ember-cp-validations';

const Validations = buildValidations({
  firstName: {
    description: 'First Name'
    validators: [
      validator('presence', {
        presence: true,
        dependentKeys: ['foo', 'bar']
      })
     ]
   },
  lastName: validator('presence', true)
}, {
  description: 'This field'
  dependentKeys: ['i18n.locale', 'disableValidations'],
  disabled() {
    return this.get('model.disableValidations');
  }
});
</code></pre>
<p>Just like in the default options, locale validator options will always take precedence over default options and default options will always take precedence
over global options. This allows you to declare global rules while having the ability to override them in lower levels.</p>
<p>This rule does not apply to <code>dependentKeys</code>, instead they all are merged. In the example above, <strong>firstName</strong>'s dependentKeys will be
<code>['i18n.locale', 'disableValidations', 'foo', 'bar']</code></p>
<p><h3 id="optionsAsFunctions">Options as Functions</h3></p>
<p>All options can be functions which are processed lazily before validate is called. These functions have the context of the validator that is being executed,
giving you access to all its properties such as <code>options</code>, <code>model</code>, <code>attribute</code>, etc.</p>
<p>Please note that the <code>message</code> option of a validator has its <a href="http://offirgolan.github.io/ember-cp-validations/docs/modules/Validators.html#message">own signature</a>.</p>
<pre class="code prettyprint"><code class="language-javascript">const Validations = buildValidations({
  dob: validator('date', {
    description: 'Date of Birth',
    format() {
      return this.get('model.meta.date.format');
    },
    before() {
      return moment();
    },
    after() {
      return moment().subtract(120, 'years');
    }
  })
});
</code></pre>
<p><h3 id="nestedKeys">Nested Keys</h3></p>
<p>When declaring object validations (not including Ember Data models), it is possible to validate child objects from the parent object.</p>
<pre class="code prettyprint"><code class="language-javascript">import Ember from 'ember';
import { validator, buildValidations } from 'ember-cp-validations';

const Validations = buildValidations({
  'acceptTerms': validator('inclusion', { in: [ true ] }),
  'user.firstName': validator('presence', true),
  'user.lasName': validator('presence', true),
  'user.account.number': validator('number')
});

export default Ember.Component.extend(Validations, {
  acceptTerms: false,
  user:  {
    firstName: 'John',
    lastName: 'Doe' ,
    account: {
      number: 123456,
    }
  },
  isFormValid: Ember.computed.alias('validations.isValid'),
});
</code></pre>

</div>


                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="../assets/vendor/prettify/prettify-min.js"></script>
    <script>prettyPrint();</script>
    <script src="../assets/vendor/jquery/jquery-1.8.2.min.js"></script>
    <script src="../assets/vendor/bootstrap/js/bootstrap.js"></script>
    <script src="../assets/js/yuidoc-bootstrap.js"></script>
</body>
</html>
